<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<title>Weekly Vocab Generator</title>
		<meta name="google-site-verification" content="eQFot4LVMhCdQpGdlBE3uuyq444ivqbwfJsg-Kstwpk" />
		<link href="style.css" rel="stylesheet" type="text/css" />
		<link href="modern.min.css" rel="stylesheet"/>
		<!-- Load the Google API Loader script. -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.0/p5.min.js"></script>
		<script type="text/javascript" src="https://apis.google.com/js/api.js?onload=onApiLoad">
		</script>
		<script defer async src="winbox.bundle.js"></script>
		<script type="text/javascript" src="loader.js"></script>
	</head>

<body onload="(async () => await checkImport())()">
	<!-- <a href="dialog.html">dialog.html</a> -->
	<div id="wb-main" style="display: none">
		<div id="content">
			<textarea id="importArea" cols="64" rows="4"></textarea>
			<button onclick="let words = this.previousElementSibling.value.split('\n'); extractWords(words)">Import</button>
		</div>
	</div>

	<button onclick="(async () => await loadPicker())()" id="signin">Sign In</button>
	<!-- <div id="result"></div> -->
	<!-- <div id="importWords"> -->
		<button id="importWordsLink" onclick="openImportWindow()">Import Words</button>
	<!-- </div> -->
	<div id="wordInputSect">
		<div id="word1Section" class="wordSection">
			<input id="word1" class="wordInput" name="Word1" placeholder="Word 1" />
			<input type="text" id="word1Sentence" placeholder="ExampleSentence" name="Word1Sentence"/>
			<div id="picture1Result" class="pictureResult"></div>
			<button onclick="choosePicture1()" id="pickPic1" class="pickPicBtn">Choose Picture 1</button>
		</div>
		<div id="word2Section" class="wordSection">
			<input id="word2" class="wordInput" name="Word2" placeholder="Word 2" />
			<input type="text" id="word2Sentence" placeholder="ExampleSentence" name="Word2Sentence"/>
			<div id="picture2Result" class="pictureResult"></div>
			<button onclick="choosePicture2()" id="pickPic2" class="pickPicBtn">Choose Picture 2</button>
		</div>
		<div id="word3Section" class="wordSection">
			<input id="word3" class="wordInput" name="Word3" placeholder="Word 3" />
			<input type="text" id="word3Sentence" placeholder="ExampleSentence" name="Word3Sentence"/>
			<div id="picture3Result" class="pictureResult"></div>
			<button onclick="choosePicture3()" id="pickPic3" class="pickPicBtn">Choose Picture 3</button>
		</div>
		<div id="word4Section" class="wordSection">
			<input id="word4" class="wordInput" name="Word4" placeholder="Word 4" />
			<input type="text" id="word4Sentence" placeholder="ExampleSentence" name="Word4Sentence"/>
			<div id="picture4Result" class="pictureResult"></div>
			<button onclick="choosePicture4()" id="pickPic4" class="pickPicBtn">Choose Picture 4</button>
		</div>
		<button id="generateVocab" onclick="(async () => await main())()">Generate</button>
	</div>
	<div id="vocabOutput">
		<output id="statusText" ></output>
		<textarea id="vocabOutputBox" cols="100" rows="10" readonly></textarea>
		<br />
	</div>
	<script type="text/javascript" src="https://apis.google.com/js/api.js"></script>
	<script
  type="module"
  src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.mjs"
></script>
	<script src="DateUtils.js"></script>
	<script src="vars.js"></script>
  <script type="module" src="index.js"></script>
	<script type="module" src="Debug.js"></script>
	<script>
		function checkImport() {
			console.log("HERE IN body onload.")
			WordImport.checkImport();
		}

		function extractWords(words) {
			console.log(words);
			word1.value = words[0].split('-')[0].trim();
			word2.value = words[1].split('-')[0].trim();
			word3.value = words[2].split('-')[0].trim();
			word4.value = words[3].split('-')[0].trim();
			importWinBox.close();
			window.importWinBox = null;
		}
		
		function openImportWindow() {
			let node = document.getElementById('content');
			let winboxArgs = {
				title: 'Import Words',
				class: 'modern',
				x: 'center',
				y: 'center'
			}
			window.importWinBox = new WinBox(winboxArgs);
			// importWinBox.addClass("modern");
			//node.style.display = "initial";
			importWinBox.mount(node.cloneNode(true));
			
			// importWinBox.move('center', 'center');
		}
	</script>
  </body>
</html>